(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/gedan/gedan"],{63:function(t,n,e){"use strict";(function(t){e(5);i(e(3));var n=i(e(64));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e(1)["createPage"])},64:function(t,n,e){"use strict";e.r(n);var i=e(65),o=e(67);for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);e(70);var a,u=e(11),r=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,"695fc36e",null,!1,i["components"],a);r.options.__file="pages/gedan/gedan.vue",n["default"]=r.exports},65:function(t,n,e){"use strict";e.r(n);var i=e(66);e.d(n,"render",(function(){return i["render"]})),e.d(n,"staticRenderFns",(function(){return i["staticRenderFns"]})),e.d(n,"recyclableRender",(function(){return i["recyclableRender"]})),e.d(n,"components",(function(){return i["components"]}))},66:function(t,n,e){"use strict";var i;e.r(n),e.d(n,"render",(function(){return o})),e.d(n,"staticRenderFns",(function(){return a})),e.d(n,"recyclableRender",(function(){return s})),e.d(n,"components",(function(){return i}));var o=function(){var t=this,n=t.$createElement;t._self._c},s=!1,a=[];o._withStripped=!0},67:function(t,n,e){"use strict";e.r(n);var i=e(68),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);n["default"]=o.a},68:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e(69),o=e(23),s=function(){e.e("components/comment").then(function(){return resolve(e(140))}.bind(null,e)).catch(e.oe)},a={data:function(){return{id:"",url:"",name:"",poster:"",author:"",detailInfo:{},count:{},songList:[],commentsList:[],commentTotal:0,allCount:0,page:1,pageComment:1,isShow:!1,index:0,musicId:""}},components:{comment:s},onUnload:function(){if(this.musicId){var n=this.musicId,e=!0,i={id:n,isPlay:e};t.$emit("audioPlay",i)}},onLoad:function(t){this.id=t.id,this.getAllSongs(this.id),this.getdetailMenu(this.id),this.getdetaildynamic(this.id),this.getmenuComments(this.id)},onReachBottom:function(){this.moreSongs(this.id)},mounted:function(){var t=this;this.$store.getters.getinnerAudioContext.onEnded((function(){t.next()}))},methods:{getMusicUrl:function(t){var n=this;return(0,o.getMusicUrl)(t).then((function(t){n.url=t.data.data[0].url,n.$store.commit("setinnerAudioContextSrc",t.data.data[0].url)}))},getmusicDetialInfo:function(t){var n=this;return(0,o.musicDetialInfo)(t).then((function(t){n.author=t.data.songs[0].ar[0].name,n.name=t.data.songs[0].al.name,n.poster=t.data.songs[0].al.picUrl}))},getAllSongs:function(t){var n=this;(0,i.allSongs)(t).then((function(t){n.songList=t.data.songs,n.$store.commit("setPlayList",n.songList)}))},getdetailMenu:function(t){var n=this;(0,i.detailMenu)(t).then((function(t){n.detailInfo=t.data.playlist,n.allCount=t.data.playlist.trackCount}))},getdetaildynamic:function(t){var n=this;(0,i.detaildynamic)(t).then((function(t){n.count=t.data}))},getmenuComments:function(t){var n=this;(0,i.menuComments)(t).then((function(t){n.commentsList=t.data.comments,n.commentTotal=t.data.total}))},changeSing:function(n){var e=this;Promise.all([this.getMusicUrl(n),this.getmusicDetialInfo(n)]).then((function(){var i=n,o=e.author,s=e.name,a=e.url,u=e.poster,r={id:i,name:s,author:o,poster:u,url:a};t.setStorage({key:"info",data:r})}))},moreSongs:function(n){var e=this;if(!1===this.isShow)15*this.page<this.allCount?(this.page+=1,(0,i.allSongs)(n,15*this.page).then((function(t){var n=t.data.songs;e.songList=e.songList.concat(n),e.$store.commit("setPlayList",e.songList)}))):t.showToast({title:"暂无更多数据。"});else if(20*this.pageComment<this.commentTotal){var o=this.pageComment+1;this.pageComment=o,(0,i.menuComments)(n,o).then((function(t){var n=t.data.comments;e.commentsList=e.commentsList.concat(n)}))}else t.showToast({title:"暂无更多数据。"})},next:function(){var t=null;this.index==this.songList.length-1?(t=this.commentssongListList[0].id,this.index=0):(t=this.songList[this.index+1].id,this.index++),this.changeSing(t)},bofang:function(t,n){this.musicId=t,this.index=n,this.changeSing(t)},showComment:function(){this.isShow=!0},closeComment:function(){this.isShow=!1,t.pageScrollTo({scrollTop:0,duration:300})}}};n.default=a}).call(this,e(1)["default"])},70:function(t,n,e){"use strict";e.r(n);var i=e(71),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);n["default"]=o.a},71:function(t,n,e){}},[[63,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/gedan/gedan.js.map