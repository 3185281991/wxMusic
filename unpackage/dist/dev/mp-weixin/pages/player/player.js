(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/player/player"],{55:function(t,i,e){"use strict";(function(t){e(5);n(e(3));var i=n(e(56));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e(1)["createPage"])},56:function(t,i,e){"use strict";e.r(i);var n=e(57),s=e(59);for(var r in s)"default"!==r&&function(t){e.d(i,t,(function(){return s[t]}))}(r);e(61);var o,a=e(11),u=Object(a["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"f78da2b4",null,!1,n["components"],o);u.options.__file="pages/player/player.vue",i["default"]=u.exports},57:function(t,i,e){"use strict";e.r(i);var n=e(58);e.d(i,"render",(function(){return n["render"]})),e.d(i,"staticRenderFns",(function(){return n["staticRenderFns"]})),e.d(i,"recyclableRender",(function(){return n["recyclableRender"]})),e.d(i,"components",(function(){return n["components"]}))},58:function(t,i,e){"use strict";var n;e.r(i),e.d(i,"render",(function(){return s})),e.d(i,"staticRenderFns",(function(){return o})),e.d(i,"recyclableRender",(function(){return r})),e.d(i,"components",(function(){return n}));var s=function(){var t=this,i=t.$createElement;t._self._c},r=!1,o=[];s._withStripped=!0},59:function(t,i,e){"use strict";e.r(i);var n=e(60),s=e.n(n);for(var r in n)"default"!==r&&function(t){e.d(i,t,(function(){return n[t]}))}(r);i["default"]=s.a},60:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e(23),s=e(43),r=e(25),o={data:function(){return{id:"",from:"",keyword:"",author:"",name:"",url:"",poster:"",lyric:[],time:[],playList:[],index:0,altitutde:"icon-zanting",isShow:!1,scrollTop:0,isPlay:!0}},onLoad:function(t){this.id=t.id,this.from=t.from,"search"===this.from&&(this.keyword=t.keyword),this.getInfo(this.id)},onUnload:function(){var i=this.id,e=this.isPlay,n={id:i,isPlay:e};t.$emit("audioPlay",n)},mounted:function(){var i=this;this.$store.getters.getinnerAudioContext.onEnded((function(){0===i.playList.length?(i.$store.commit("setPause"),t.$emit("pause")):i.next()}))},methods:{throttle:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;(0,r.throttle)(t,i)()},getMusicUrl:function(t){var i=this;return(0,n.getMusicUrl)(t).then((function(t){i.url=t.data.data[0].url,i.$store.commit("setinnerAudioContextSrc",i.url)}))},getmusicDetialInfo:function(t){var i=this;return(0,n.musicDetialInfo)(t).then((function(t){i.author=t.data.songs[0].ar[0].name,i.name=t.data.songs[0].al.name,i.poster=t.data.songs[0].al.picUrl}))},getlyric:function(t){var i=this;return this.lyric=[],this.time=[],(0,n.getlyric)(t).then((function(t){var e=t.data.lrc.lyric;""===e?i.isShow=!0:(0,r.lyric)(i.time,i.lyric,e)}))},getkeySearch:function(t){var i=this;(0,s.keySearch)(t).then((function(t){i.playList=t.data.result.songs,i.$store.commit("setPlayList",i.playList)}))},getsimilarMusic:function(t){var i=this;(0,n.similarMusic)(t).then((function(t){i.playList=t.data.songs,i.$store.commit("setPlayList",i.playList)}))},getInfo:function(i){var e=this;this.scrollTop=0,"search"===this.from?this.getkeySearch(this.keyword):this.getsimilarMusic(i),Promise.all([this.getmusicDetialInfo(i),this.getlyric(i),this.getMusicUrl(i)]).then((function(){var n=e.author,s=e.name,r=e.url,o=e.poster,a={id:i,name:s,author:n,poster:o,url:r};t.setStorage({key:"info",data:a}),e.$store.commit("setPlay"),setTimeout((function(){console.log(e.$store.state.innerAudioContext.paused)}),300),e.$store.getters.getinnerAudioContext.onTimeUpdate((function(){e.timeupdate()}))}))},play:function(){"icon-bofang"===this.altitutde?(this.altitutde="icon-zanting",this.$store.commit("setPlay"),this.isPlay=!0):(this.altitutde="icon-bofang",this.$store.commit("setPause"),this.isPlay=!1)},prev:function(){var i=null;0!==this.playList.length?(0==this.index?(i=this.playList[this.playList.length-1].id,this.index=this.playList.length-1):(i=this.playList[this.index-1].id,this.index--),this.id=i,this.getInfo(this.id),this.altitutde="icon-zanting"):t.showToast({title:"暂无该歌相似歌曲。"})},next:function(){var i=null;0!==this.playList.length?(this.index==this.playList.length-1?(i=this.playList[0].id,this.index=0):(i=this.playList[this.index+1].id,this.index++),this.id=i,this.getInfo(this.id),this.altitutde="icon-zanting"):t.showToast({title:"暂无该歌相似歌曲。"})},timeupdate:function(){var t=parseInt(this.$store.getters.getinnerAudioContext.currentTime/60),i=parseInt(this.$store.getters.getinnerAudioContext.currentTime%60),e=(t<10?"0"+t:t)+":"+(i<10?"0"+i:i),n=this.time.findIndex((function(t){return t===e}));if(-1!=n){var s=-25*n;this.scrollTop=s}}}};i.default=o}).call(this,e(1)["default"])},61:function(t,i,e){"use strict";e.r(i);var n=e(62),s=e.n(n);for(var r in n)"default"!==r&&function(t){e.d(i,t,(function(){return n[t]}))}(r);i["default"]=s.a},62:function(t,i,e){}},[[55,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/player/player.js.map