(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/singInfo/singInfo"],{104:function(t,n,i){"use strict";(function(t){i(5);e(i(3));var n=e(i(105));function e(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(n.default)}).call(this,i(1)["createPage"])},105:function(t,n,i){"use strict";i.r(n);var e=i(106),s=i(108);for(var r in s)"default"!==r&&function(t){i.d(n,t,(function(){return s[t]}))}(r);i(110);var o,a=i(11),u=Object(a["default"])(s["default"],e["render"],e["staticRenderFns"],!1,null,"46010f26",null,!1,e["components"],o);u.options.__file="pages/singInfo/singInfo.vue",n["default"]=u.exports},106:function(t,n,i){"use strict";i.r(n);var e=i(107);i.d(n,"render",(function(){return e["render"]})),i.d(n,"staticRenderFns",(function(){return e["staticRenderFns"]})),i.d(n,"recyclableRender",(function(){return e["recyclableRender"]})),i.d(n,"components",(function(){return e["components"]}))},107:function(t,n,i){"use strict";var e;i.r(n),i.d(n,"render",(function(){return s})),i.d(n,"staticRenderFns",(function(){return o})),i.d(n,"recyclableRender",(function(){return r})),i.d(n,"components",(function(){return e}));var s=function(){var t=this,n=t.$createElement;t._self._c},r=!1,o=[];s._withStripped=!0},108:function(t,n,i){"use strict";i.r(n);var e=i(109),s=i.n(e);for(var r in e)"default"!==r&&function(t){i.d(n,t,(function(){return e[t]}))}(r);n["default"]=s.a},109:function(t,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=i(52),s=i(23),r={data:function(){return{id:null,desc:[],singList:[],index:0,singLength:0,offset:1,mindex:0,musicId:0,url:"",name:"",poster:"",author:"",isShow:!0,isPlay:!1}},computed:{getsingList:{get:function(){return this.singList}}},onLoad:function(t){this.id=t.id,this.getsingerAllSing(this.id),this.getsingerDetailInfo(this.id)},onUnload:function(){if(this.musicId){var n=this.musicId,i=this.isPlay,e={id:n,isPlay:i};t.$emit("audioPlay",e)}},onReachBottom:function(){0===this.index&&this.moreSing(this.id)},methods:{getsingerAllSing:function(t){var n=this;(0,e.singerAllSing)(t).then((function(t){n.singList=t.data.songs,n.$store.commit("setPlayList",n.songList),n.singLength=t.data.total}))},getsingerDetailInfo:function(t){var n=this;(0,e.singerDetailInfo)(t).then((function(t){n.desc=t.data.data}))},getMusicUrl:function(t){var n=this;return(0,s.getMusicUrl)(t).then((function(t){n.url=t.data.data[0].url,n.$store.commit("setinnerAudioContextSrc",t.data.data[0].url)}))},getmusicDetialInfo:function(t){var n=this;return(0,s.musicDetialInfo)(t).then((function(t){n.author=t.data.songs[0].ar[0].name,n.name=t.data.songs[0].al.name,n.poster=t.data.songs[0].al.picUrl}))},moreSing:function(t){var n=this;20*this.offset<this.singLength&&(this.offset++,(0,e.singerAllSing)(t,this.offset).then((function(t){var i=t.data.songs;n.singList=n.singList.concat(i),n.$store.commit("setPlayList",n.songList)})))},changeSing:function(n){var i=this;Promise.all([this.getMusicUrl(n),this.getmusicDetialInfo(n)]).then((function(){var e=n,s=i.author,r=i.name,o=i.url,a=i.poster,u={id:e,name:r,author:s,poster:a,url:o};t.setStorage({key:"info",data:u})}))},changeIndex:function(t){this.index=t,this.isShow=0===t},next:function(){var t=null;this.index==this.singList.length-1?(t=this.singList[0].id,this.mindex=0):(t=this.singList[this.index+1].id,this.mindex++),this.changeSing(t)},bofang:function(t,n){this.musicId=t,this.mindex=n,this.changeSing(t),this.isPlay=!0}}};n.default=r}).call(this,i(1)["default"])},110:function(t,n,i){"use strict";i.r(n);var e=i(111),s=i.n(e);for(var r in e)"default"!==r&&function(t){i.d(n,t,(function(){return e[t]}))}(r);n["default"]=s.a},111:function(t,n,i){}},[[104,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/singInfo/singInfo.js.map