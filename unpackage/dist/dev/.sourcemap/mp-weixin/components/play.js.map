{"version":3,"sources":["webpack:///D:/hbuilder/music/components/play.vue?e539","webpack:///D:/hbuilder/music/components/play.vue?eb34","webpack:///D:/hbuilder/music/components/play.vue?4b8f","webpack:///D:/hbuilder/music/components/play.vue?72c2","uni-app:///components/play.vue","webpack:///D:/hbuilder/music/components/play.vue?7f34"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"gHAAA,yHACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,8GAAgqB,eAAG,G,gHCgBnqB,YAKA,Q,EAGA,CACA,YACA,KAFA,WAGA,OACA,MACA,MACA,OACA,YACA,UACA,WAEA,YACA,QACA,wBACA,gBAGA,UAEA,QAFA,WAGA,mBAGA,QAvBA,WAuBA,WAEA,8BACA,cACA,WACA,SAEA,SACA,sDACA,2BACA,2BACA,2BAGA,gCACA,0BACA,+BAGA,0BACA,0BACA,+BAGA,+BACA,eACA,2BACA,UACA,2BACA,6BAEA,0BACA,6BAGA,2CAGA,+BACA,IACA,YACA,4DACA,+BACA,oCAGA,6DACA,aAGA,SAEA,SAFA,SAEA,qEACA,sBAGA,gBANA,SAMA,eACA,uCACA,4BAIA,YAZA,SAYA,cACA,6CACA,8BACA,0DAGA,KAlBA,WAmBA,gCACA,8BACA,gCAEA,6BACA,iCAIA,mBA5BA,SA4BA,cACA,iDACA,yCACA,oCACA,4CAGA,SAnCA,SAmCA,cACA,kBACA,SACA,8BACA,kCAEA,8BACA,8BAEA,sBACA,qFACA,cACA,WACA,iBAGA,oCAGA,KAtDA,WAwDA,2BACA,UACA,qBACA,uBACA,iBACA,iBACA,CACA,kCACA,iBACA,aAEA,mCAEA,aACA,gBAIA,aA1EA,SA0EA,GAEA,OACA,cACA,4CAGA,aACA,kB,2ECnLA,8GAA2wC,eAAG,G","file":"components/play.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./play.vue?vue&type=template&id=1f45e222&scoped=true&\"\nvar renderjs\nimport script from \"./play.vue?vue&type=script&lang=js&\"\nexport * from \"./play.vue?vue&type=script&lang=js&\"\nimport style0 from \"./play.vue?vue&type=style&index=0&id=1f45e222&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f45e222\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/play.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=template&id=1f45e222&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"play\">\r\n\t\t<view class=\"img\" @click=\"jumpToPlayer(getInfo.id)\">\r\n\t\t\t<image :src=\"getInfo.poster\" mode=\"aspectFit\"></image>\r\n\t\t</view>\r\n\t\t<view class=\"info\">\r\n\t\t\t{{getInfo.name}}-{{getInfo.author}}\r\n\t\t</view>\r\n\t\t<view class=\"btn\">\r\n\t\t\t<text class=\"iconfont\" :class=\"altitutde\" @click=\"play\"></text>\r\n\t\t\t<text class=\"iconfont icon-xiayishou\" @click=\"throttle(next)\"></text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tsimilarMusic,\r\n\t\tmusicDetialInfo,\r\n\t\tgetMusicUrl\r\n\t} from '../network/public.js';\r\n\timport {\r\n\t\tthrottle\r\n\t} from '../utils/index.js';\r\n\texport default {\r\n\t\tname: \"play\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinfo: {\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t\turl: '',\r\n\t\t\t\t\tauthor: '暂无',\r\n\t\t\t\t\tname: '暂无',\r\n\t\t\t\t\tposter: '',\r\n\t\t\t\t},\r\n\t\t\t\tplayList: [],\r\n\t\t\t\tindex: 0,\r\n\t\t\t\taltitutde: 'icon-bofang',\r\n\t\t\t\tcurrentTime: 0\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t//动态获取\r\n\t\t\tgetInfo() {\r\n\t\t\t\treturn this.info\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t//首页点击歌曲播放保存\r\n\t\t\tuni.$on('playinfo', info => {\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: \"info\",\r\n\t\t\t\t\tdata: info,\r\n\t\t\t\t})\r\n\t\t\t\tthis.info = info;\r\n\t\t\t\tthis.$store.commit('setinnerAudioContextSrc', this.info.url);\r\n\t\t\t\tthis.$store.commit('setPlay');\r\n\t\t\t\tthis.altitutde = \"icon-zanting\";\r\n\t\t\t\tthis.getsimilarMusic(info.id);\r\n\t\t\t})\r\n\t\t\t//跳转视频页面时暂停\r\n\t\t\tuni.$on('audioChnage', () => {\r\n\t\t\t\tthis.altitutde = \"icon-bofang\";\r\n\t\t\t\tthis.$store.commit('setPause');\r\n\t\t\t})\r\n\t\t\t//播放器页面中没有相似歌曲时触发暂停\r\n\t\t\tuni.$on('pause', () => {\r\n\t\t\t\tthis.altitutde = \"icon-bofang\";\r\n\t\t\t\tthis.$store.commit('setPause');\r\n\t\t\t})\r\n\t\t\t//从播放器回到页面重新获取对应的数据,以及传过来的数据\r\n\t\t\tuni.$on('audioPlay', (obj) => {\r\n\t\t\t\tthis.info.id = obj.id;\r\n\t\t\t\tthis.getmusicDetialInfo(obj.id)\r\n\t\t\t\tif (obj.isPlay) {\r\n\t\t\t\t\tthis.altitutde = \"icon-zanting\";\r\n\t\t\t\t\tthis.$store.commit('setPlay');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.altitutde = \"icon-bofang\";\r\n\t\t\t\t\tthis.$store.commit('setPause');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.playList = this.$store.getters.getPlayList;\r\n\t\t\t})\r\n\t\t\t//每次刷新的时候从vue中取出保存数据\r\n\t\t\tconst value = uni.getStorageSync(\"info\")\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.info = value;\r\n\t\t\t\tthis.$store.commit('setinnerAudioContextSrc', this.info.url);\r\n\t\t\t\tthis.$store.commit('setPause');\r\n\t\t\t\tthis.getsimilarMusic(this.info.id);\r\n\t\t\t}\r\n\r\n\t\t\tthis.$store.getters.getinnerAudioContext.onEnded(() => {\r\n\t\t\t\tthis.next();\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//节流\r\n\t\t\tthrottle(fun, delay = 1000) {\r\n\t\t\t\tthrottle(fun, delay)();\r\n\t\t\t},\r\n\t\t\t//相似音乐\r\n\t\t\tgetsimilarMusic(id) {\r\n\t\t\t\tsimilarMusic(id).then(res => {\r\n\t\t\t\t\tthis.playList = res.data.songs;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//歌曲url\r\n\t\t\tgetMusicUrl(id) {\r\n\t\t\t\treturn getMusicUrl(id).then(res => {\r\n\t\t\t\t\tthis.info.url = res.data.data[0].url;\r\n\t\t\t\t\tthis.$store.commit('setinnerAudioContextSrc', this.info.url);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tplay() {\r\n\t\t\t\tif (this.altitutde === 'icon-bofang') {\r\n\t\t\t\t\tthis.altitutde = \"icon-zanting\";\r\n\t\t\t\t\tthis.$store.commit('setPlay');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.altitutde = \"icon-bofang\";\r\n\t\t\t\t\tthis.$store.commit('setPause');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//歌曲信息\r\n\t\t\tgetmusicDetialInfo(id) {\r\n\t\t\t\treturn musicDetialInfo(id).then(res => {\r\n\t\t\t\t\tthis.info.author = res.data.songs[0].ar[0].name\r\n\t\t\t\t\tthis.info.name = res.data.songs[0].al.name;\r\n\t\t\t\t\tthis.info.poster = res.data.songs[0].al.picUrl;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetMusic(item) {\r\n\t\t\t\tthis.info.id = item.id;\r\n\t\t\t\tif (item.album) {\r\n\t\t\t\t\tthis.info.author = item.album.name;\r\n\t\t\t\t\tthis.info.poster = item.album.picUrl;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.info.author = item.ar[0].name;\r\n\t\t\t\t\tthis.info.poster = item.al.picUrl;\r\n\t\t\t\t}\r\n\t\t\t\tthis.info.name = item.name;\r\n\t\t\t\tPromise.all([this.getmusicDetialInfo(item.id), this.getMusicUrl(item.id)]).then(() => {\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: \"info\",\r\n\t\t\t\t\t\tdata: this.info,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.getsimilarMusic(this.info.id);\r\n\t\t\t},\r\n\r\n\t\t\tnext() {\r\n\t\t\t\t//点击下一首，自动播放\r\n\t\t\t\tlet length = this.playList.length;\r\n\t\t\t\tif (length !== 0) {\r\n\t\t\t\t\tif (this.index === length - 1) {\r\n\t\t\t\t\t\tlet item = this.playList[0];\r\n\t\t\t\t\t\tthis.getMusic(item);\r\n\t\t\t\t\t\tthis.index = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet item = this.playList[this.index + 1];\r\n\t\t\t\t\t\tthis.getMusic(item);\r\n\t\t\t\t\t\tthis.index++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.altitutde = \"icon-zanting\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"暂无曲目\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tjumpToPlayer(id) {\r\n\t\t\t\t//这里跳转需要拿到跳转时播放的时间,并且暂停\r\n\t\t\t\tif (id !== '') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../player/player?id=' + id + '&from=play'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"暂无曲目\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.play {\r\n\t\twidth: 100%;\r\n\t\theight: 120rpx;\r\n\t\tbackground-color: $uni-bg-color-grey;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\r\n\t\t.img {\r\n\t\t\twidth: 25%;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.info {\r\n\t\t\twidth: 35%;\r\n\t\t\tfont-size: 35rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\toverflow: hidden;\r\n\t\t\tline-height: 120rpx;\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\twidth: 40%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-around;\r\n\r\n\t\t\t.iconfont {\r\n\t\t\t\tcolor: $uni-text-color-placeholder;\r\n\t\t\t}\r\n\r\n\t\t\t.iconfont:nth-child(1) {\r\n\t\t\t\tpadding-left: 35rpx;\r\n\t\t\t\tpadding-top: 20rpx;\r\n\t\t\t\tfont-size: 80rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.iconfont:nth-child(2) {\r\n\t\t\t\tpadding-top: 18rpx;\r\n\t\t\t\tpadding-right: 10rpx;\r\n\t\t\t\tfont-size: 88rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=style&index=0&id=1f45e222&lang=scss&scoped=true&\"; export default mod; export * from \"-!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBiulder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./play.vue?vue&type=style&index=0&id=1f45e222&lang=scss&scoped=true&\""],"sourceRoot":""}