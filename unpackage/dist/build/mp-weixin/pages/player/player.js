(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/player/player"],{6098:function(t,i,e){"use strict";(function(t){e("d895");n(e("66fd"));var i=n(e("84d7"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])},7776:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("adeb"),s=e("4769"),o=e("1efd"),a={data:function(){return{id:"",from:"",keyword:"",author:"",name:"",url:"",poster:"",lyric:[],time:[],playList:[],index:0,altitutde:"icon-zanting",isShow:!1,scrollTop:0}},onLoad:function(t){this.id=t.id,this.from=t.from,"search"===this.from&&(this.keyword=t.keyword),this.getInfo(this.id)},onUnload:function(){t.$emit("audioPlay",this.id)},mounted:function(){var i=this;this.$store.getters.getinnerAudioContext.onEnded((function(){0===i.playList.length?(i.$store.commit("setPause"),t.$emit("pause")):i.next()}))},methods:{throttle:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;(0,o.throttle)(t,i)()},getMusicUrl:function(t){var i=this;return(0,n.getMusicUrl)(t).then((function(t){i.url=t.data.data[0].url,i.$store.commit("setinnerAudioContextSrc",i.url)}))},getmusicDetialInfo:function(t){var i=this;return(0,n.musicDetialInfo)(t).then((function(t){i.author=t.data.songs[0].ar[0].name,i.name=t.data.songs[0].al.name,i.poster=t.data.songs[0].al.picUrl}))},getlyric:function(t){var i=this;return this.lyric=[],this.time=[],(0,n.getlyric)(t).then((function(t){var e=t.data.lrc.lyric;""===e?i.isShow=!0:(0,o.lyric)(i.time,i.lyric,e)}))},getkeySearch:function(t){var i=this;(0,s.keySearch)(t).then((function(t){i.playList=t.data.result.songs,i.$store.commit("setPlayList",i.playList)}))},getsimilarMusic:function(t){var i=this;(0,n.similarMusic)(t).then((function(t){i.playList=t.data.songs,i.$store.commit("setPlayList",i.playList)}))},getInfo:function(i){var e=this;this.scrollTop=0,"search"===this.from?this.getkeySearch(this.keyword):this.getsimilarMusic(i),Promise.all([this.getmusicDetialInfo(i),this.getlyric(i),this.getMusicUrl(i)]).then((function(){var n=e.author,s=e.name,o=e.url,a=e.poster,r={id:i,name:s,author:n,poster:a,url:o};t.setStorage({key:"info",data:r}),e.$store.commit("setPlay"),setTimeout((function(){console.log(e.$store.state.innerAudioContext.paused)}),300),e.$store.getters.getinnerAudioContext.onTimeUpdate((function(){e.timeupdate()}))}))},play:function(){"icon-bofang"===this.altitutde?(this.altitutde="icon-zanting",this.$store.commit("setPlay")):(this.altitutde="icon-bofang",this.$store.commit("setPause"))},prev:function(){var i=null;0!==this.playList.length?(0==this.index?(i=this.playList[this.playList.length-1].id,this.index=this.playList.length-1):(i=this.playList[this.index-1].id,this.index--),this.id=i,this.getInfo(this.id),this.altitutde="icon-zanting"):t.showToast({title:"暂无该歌相似歌曲。"})},next:function(){var i=null;0!==this.playList.length?(this.index==this.playList.length-1?(i=this.playList[0].id,this.index=0):(i=this.playList[this.index+1].id,this.index++),this.id=i,this.getInfo(this.id),this.altitutde="icon-zanting"):t.showToast({title:"暂无该歌相似歌曲。"})},timeupdate:function(){var t=parseInt(this.$store.getters.getinnerAudioContext.currentTime/60),i=parseInt(this.$store.getters.getinnerAudioContext.currentTime%60),e=(t<10?"0"+t:t)+":"+(i<10?"0"+i:i),n=this.time.findIndex((function(t){return t===e}));if(-1!=n){var s=-25*n;this.scrollTop=s}}}};i.default=a}).call(this,e("543d")["default"])},"84d7":function(t,i,e){"use strict";e.r(i);var n=e("c82a"),s=e("fe1b");for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e("976c");var a,r=e("f0c5"),u=Object(r["a"])(s["default"],n["b"],n["c"],!1,null,"68b1d353",null,!1,n["a"],a);i["default"]=u.exports},"976c":function(t,i,e){"use strict";var n=e("9c36"),s=e.n(n);s.a},"9c36":function(t,i,e){},c82a:function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var s=function(){var t=this,i=t.$createElement;t._self._c},o=[]},fe1b:function(t,i,e){"use strict";e.r(i);var n=e("7776"),s=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=s.a}},[["6098","common/runtime","common/vendor"]]]);